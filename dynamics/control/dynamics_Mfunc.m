%% dynamics_Mfunc.m
%  从封闭形式的动力学方程中得到动力学状态空间方程的惯性项矩阵（6*6）
function M = dynamics_Mfunc(TAU)

%%
M = sym(zeros(6,6));
for ii = 1:6
	Q_ = zeros(6, 1);
	Q_(ii) = 1;
	for jj = 1:6
		M(jj, ii) = subs(TAU(jj), ...
		                {'qdd1', 'qdd2', 'qdd3', 'qdd4', 'qdd5', 'qdd6', ...
						 'qd1', 'qd2', 'qd3', 'qd4', 'qd5', 'qd6', ...
						 'fe1', 'fe2', 'fe3', 'ne1', 'ne2', 'ne3', 'g', ...
						 'fv1', 'fv2', 'fv3', 'fv4', 'fv5', 'fv6', ...
						 'fc1', 'fc2', 'fc3', 'fc4', 'fc5', 'fc6'}, ...
						 {Q_(1), Q_(2), Q_(3), Q_(4), Q_(5), Q_(6), ...
						  0, 0, 0, 0, 0, 0, ...
						  0, 0, 0, 0, 0, 0, 0, ...
						  0, 0, 0, 0, 0, 0, ...
						  0, 0, 0, 0, 0, 0});
	end
end

